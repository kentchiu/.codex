---
version: 1.0.0
description: å¯¦ä½œæœ€ç°¡å–®çš„ç¨‹å¼ç¢¼è®“æ¸¬è©¦é€šé
argument-hint: TARGET="[test-file-or-feature]"
---
# Project Tdd Green

**å¯ç”¨å·¥å…·**: Read, Edit, Bash - å»ºè­°é™åˆ¶ä½¿ç”¨é€™äº›å·¥å…·

---
# TDD Green - æ¸¬è©¦é©…å‹•é–‹ç™¼ï¼šç¶ ç‡ˆéšæ®µ

## ğŸ¯ ç”¨é€”

å¯¦ä½œæœ€ç°¡å–®çš„ç¨‹å¼ç¢¼è®“æ¸¬è©¦é€šéï¼Œå°ˆæ³¨æ–¼åŠŸèƒ½å¯¦ç¾è€Œéå„ªåŒ–ï¼Œå¿«é€Ÿé”åˆ°ç¶ ç‡ˆç‹€æ…‹ã€‚

## ğŸ“ ä½¿ç”¨æ–¹æ³•

`/project:tdd-green [æ¸¬è©¦æª”æ¡ˆæˆ–åŠŸèƒ½åç¨±]`

## ğŸ—ï¸ æ ¸å¿ƒåŸå‰‡

### KISS (Keep It Simple, Stupid)

- [ ] **æœ€ç°¡å¯¦ä½œ**ï¼šç”¨æœ€ç›´æ¥çš„æ–¹å¼é€šéæ¸¬è©¦
- [ ] **é¿å…éæ—©å„ªåŒ–**ï¼šä¸è¦åœ¨ç¶ ç‡ˆéšæ®µåšå„ªåŒ–
- [ ] **æ¸…æ™°å„ªæ–¼è°æ˜**ï¼šå¯«å‡ºæ˜“æ‡‚çš„ç¨‹å¼ç¢¼

### YAGNI (You Ain't Gonna Need It)

- [ ] **åªå¯«éœ€è¦çš„**ï¼šåªå¯¦ä½œæ¸¬è©¦è¦æ±‚çš„åŠŸèƒ½
- [ ] **ä¸åŠ é¡å¤–åŠŸèƒ½**ï¼šä¸è¦é æ¸¬æœªä¾†éœ€æ±‚
- [ ] **å°ˆæ³¨ç•¶ä¸‹æ¸¬è©¦**ï¼šä¸€æ¬¡åªé€šéä¸€å€‹æ¸¬è©¦

### SOLID åŸå‰‡

- [ ] **æš«ä¸è€ƒæ…®**ï¼šç¶ ç‡ˆéšæ®µå…ˆé€šéæ¸¬è©¦ï¼Œé‡æ§‹éšæ®µå†è€ƒæ…® SOLID
- [ ] **ä¿æŒç°¡å–®**ï¼šé¿å…éåº¦è¨­è¨ˆçš„é¡åˆ¥çµæ§‹
- [ ] **å»¶é²æ±ºç­–**ï¼šæ¶æ§‹æ±ºç­–ç•™åˆ°é‡æ§‹éšæ®µ

### DRY (Don't Repeat Yourself)

- [ ] **æš«æ™‚å®¹å¿é‡è¤‡**ï¼šç¶ ç‡ˆéšæ®µå¯ä»¥æœ‰é‡è¤‡ç¨‹å¼ç¢¼
- [ ] **è¨˜éŒ„é‡è¤‡ä½ç½®**ï¼šç‚ºé‡æ§‹éšæ®µåšæº–å‚™
- [ ] **å…ˆå®Œæˆå†å®Œå–„**ï¼šåŠŸèƒ½å„ªå…ˆï¼Œå„ªåŒ–å…¶æ¬¡

## ğŸ”§ åŸ·è¡Œæµç¨‹

### 1. è¦–è¦ºåŒ–è¼¸å‡º

#### åŸ·è¡Œé–‹å§‹æ™‚é¡¯ç¤º

```
ğŸ“Š Story é€²åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30% (1/3 AC å®Œæˆ)
ğŸ¯ ç•¶å‰ AC é€²åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60% (3/5 Cycles å®Œæˆ)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸŸ¢ TDD GREEN PHASE - STORY-[ç·¨è™Ÿ]: [Story æ¨™é¡Œ]                   â•‘
â•‘ AC-[ç·¨è™Ÿ]: [AC æè¿°]                                              â•‘
â•‘ Cycle [ç•¶å‰/ç¸½æ•¸]: [Cycle æè¿°]                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æ­£åœ¨å¯¦ä½œæœ€ç°¡å–®çš„ç¨‹å¼ç¢¼é€šéæ¸¬è©¦...
```

### 2. æ¸¬è©¦åˆ†æ

- [ ] è¼‰å…¥å¤±æ•—çš„æ¸¬è©¦ï¼š$ARGUMENTS
- [ ] åˆ†æéŒ¯èª¤è¨Šæ¯
- [ ] ç†è§£é æœŸè¡Œç‚º
- [ ] ç¢ºå®šå¯¦ä½œç¯„åœ

### 3. æœ€å°å¯¦ä½œç­–ç•¥

#### ä¸‰ç¨®å¯¦ä½œç­–ç•¥

1. **Fake it** - å…ˆè¿”å›å›ºå®šå€¼ï¼ˆæœ€ç°¡å–®ï¼‰
2. **Obvious implementation** - æ˜é¡¯çš„å¯¦ä½œï¼ˆé‚è¼¯ç°¡å–®æ™‚ï¼‰
3. **Triangulation** - é€éå¤šå€‹æ¸¬è©¦æ¨å°ï¼ˆé‚è¼¯è¤‡é›œæ™‚ï¼‰

#### é¸æ“‡ç­–ç•¥çš„åŸå‰‡ (KISS)

```python
# ç­–ç•¥ 1: Fake it (æœ€ç¬¦åˆ KISS)
def add(a, b):
    return 5  # å¦‚æœæ¸¬è©¦åªæœ‰ add(2,3)==5

# ç­–ç•¥ 2: Obvious (é‚è¼¯ç°¡å–®æ˜é¡¯)
def add(a, b):
    return a + b  # ç°¡å–®åˆ°ä¸å¯èƒ½éŒ¯

# ç­–ç•¥ 3: Triangulation (éœ€è¦å¤šå€‹æ¸¬è©¦æ‰èƒ½ç¢ºå®š)
# ç­‰ç¬¬äºŒå€‹æ¸¬è©¦ add(1,1)==2 å¤±æ•—å¾Œå†æ”¹
```

### 4. ç¨‹å¼ç¢¼å¯¦ä½œæ¨¡å¼

#### å¯¦ä½œç©ºå‡½æ•¸/æ–¹æ³• (YAGNI)

```python
# Before (Red)
# AttributeError: 'TodoList' object has no attribute 'add_task'

# After (Green) - åªåŠ éœ€è¦çš„
class TodoList:
    def add_task(self, description):
        pass  # æœ€ç°¡å¯¦ä½œï¼Œåªè¦æ–¹æ³•å­˜åœ¨å³å¯
```

#### è™•ç†æ¸¬è©¦éœ€æ±‚ (KISS)

```python
# æ¸¬è©¦è¦æ±‚: todo_list.count() æ‡‰è©²è¿”å›ä»»å‹™æ•¸é‡

# æœ€ç°¡å¯¦ä½œ
class TodoList:
    def __init__(self):
        self.tasks = []  # åªå› æ¸¬è©¦éœ€è¦æ‰åŠ 

    def add_task(self, description):
        self.tasks.append(description)  # æœ€ç°¡å–®çš„å¯¦ä½œ

    def count(self):
        return len(self.tasks)  # ç›´æ¥è¿”å›é•·åº¦
```

### 5. å¯¦ä½œç¯„ä¾‹

#### ç¯„ä¾‹ 1ï¼šèªè­‰åŠŸèƒ½ (KISS + YAGNI)

```python
# æ¸¬è©¦: test_login_with_valid_credentials_returns_token
def login(email, password):
    # æœ€ç°¡å¯¦ä½œ - Fake it
    if email == "test@test.com" and password == "password":
        return {"success": True, "token": "fake-token"}
    return {"success": False}

# åŸå‰‡é«”ç¾ï¼š
# KISS âœ“ - ç¡¬ç·¨ç¢¼æœ€ç°¡å–®
# YAGNI âœ“ - æ²’æœ‰åŠ å¯†ã€æ²’æœ‰è³‡æ–™åº«ã€æ²’æœ‰ JWT
```

#### ç¯„ä¾‹ 2ï¼šè³‡æ–™å„²å­˜ (é¿å… SOLID éåº¦è¨­è¨ˆ)

```python
# æ¸¬è©¦: test_save_user_returns_id
class UserService:
    def __init__(self):
        self.users = []  # è¨˜æ†¶é«”å„²å­˜æœ€ç°¡å–®
        self.next_id = 1

    def save_user(self, name, email):
        user = {
            'id': self.next_id,
            'name': name,
            'email': email
        }
        self.users.append(user)
        self.next_id += 1
        return user['id']

# åŸå‰‡é«”ç¾ï¼š
# KISS âœ“ - ä¸ç”¨è³‡æ–™åº«ï¼Œç”¨ list
# YAGNI âœ“ - ä¸åšé©—è­‰ã€ä¸åšæŒä¹…åŒ–
# æš«ä¸è€ƒæ…® SOLID - ä¸åˆ†é›¢ Repository
```

### 6. æ¸¬è©¦åŸ·è¡Œç¢ºèª

```bash
# åŸ·è¡Œç‰¹å®šæ¸¬è©¦
pytest test_story_001_add_task.py::test_add_command_exists -v

# ç¢ºèªç¶ ç‡ˆ
âœ“ test_add_command_exists PASSED
```

#### å®Œæˆå¾Œé¡¯ç¤º

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ âœ… GREEN PHASE COMPLETE!                                          â•‘
â•‘ æ¸¬è©¦å·²é€šéï¼štest_add_command_exists()                             â•‘
â•‘ ä¸‹ä¸€æ­¥ï¼šåŸ·è¡Œ /project:tdd-refactor é€²è¡Œé‡æ§‹                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 7. å¯¦ä½œæª¢æŸ¥æ¸…å–®

#### ç¶ ç‡ˆéšæ®µæª¢æŸ¥

- [ ] [ ] æ¸¬è©¦æ˜¯å¦é€šéï¼Ÿ
- [ ] [ ] æ˜¯å¦æœ€ç°¡å¯¦ä½œï¼Ÿ(KISS)
- [ ] [ ] æœ‰ç„¡å¤šé¤˜åŠŸèƒ½ï¼Ÿ(YAGNI)
- [ ] [ ] èƒ½å¦æ›´ç°¡å–®ï¼Ÿ

#### åé¢æ¨¡å¼è­¦ç¤º

```python
# âŒ é•å KISS - éåº¦è¤‡é›œ
def calculate_discount(price, customer_type):
    # ä¸éœ€è¦çš„è¨­è¨ˆæ¨¡å¼
    strategy_map = {
        'regular': RegularDiscountStrategy(),
        'vip': VIPDiscountStrategy(),
        'new': NewCustomerStrategy()
    }
    return strategy_map[customer_type].calculate(price)

# âœ… éµå¾ª KISS - ç°¡å–®ç›´æ¥
def calculate_discount(price, customer_type):
    if customer_type == 'vip':
        return price * 0.8
    elif customer_type == 'new':
        return price * 0.9
    return price
```

## ğŸ’¡ å¯¦ä½œæŠ€å·§

### å¿«é€Ÿé€šéæ¸¬è©¦çš„å„ªå…ˆé †åº

1. **Fake it** - æœ€å¿«é€šéæ¸¬è©¦
2. **ç¡¬ç·¨ç¢¼** - ç•¶æ¸¬è©¦æ¡ˆä¾‹å°‘æ™‚
3. **ç°¡å–®é‚è¼¯** - ç•¶å¯¦ä½œæ˜é¡¯æ™‚
4. **è¤‡è£½è²¼ä¸Š** - å¾æ¸¬è©¦è¤‡è£½é æœŸå€¼

### ä½•æ™‚åœæ­¢

- [ ] æ¸¬è©¦è®Šç¶  âœ…
- [ ] æ²’æœ‰ç·¨è­¯éŒ¯èª¤ âœ…
- [ ] åŠŸèƒ½ç¬¦åˆæ¸¬è©¦è¦æ±‚ âœ…
- [ ] æ²’æœ‰é¡å¤–åŠŸèƒ½ âœ…

## ğŸš« ç¶ ç‡ˆéšæ®µç¦æ­¢äº‹é …

### ä¸è¦åšçš„äº‹

- [ ] âŒ é‡æ§‹ç¨‹å¼ç¢¼ï¼ˆç­‰é‡æ§‹éšæ®µï¼‰
- [ ] âŒ å„ªåŒ–æ•ˆèƒ½ï¼ˆYAGNIï¼‰
- [ ] âŒ åŠ è¨»è§£ï¼ˆKISSï¼‰
- [ ] âŒ è™•ç†é‚Šç•Œæ¢ä»¶ï¼ˆé™¤éæ¸¬è©¦è¦æ±‚ï¼‰
- [ ] âŒ è¨­è¨ˆæ¶æ§‹ï¼ˆé•å KISSï¼‰

### è¨˜ä½ç›®æ¨™

```
ç›®æ¨™ï¼šè®“æ¸¬è©¦é€šé
ä¸æ˜¯ï¼šå¯«å‡ºå®Œç¾ç¨‹å¼ç¢¼
```

## ğŸ“š ç›¸é—œæŒ‡ä»¤

- [ ] `/project:tdd-red` - æ’°å¯«å¤±æ•—æ¸¬è©¦
- [ ] `/project:tdd-refactor` - é‡æ§‹æ”¹å–„ç¨‹å¼ç¢¼
- [ ] `/project:story-write` - æŸ¥çœ‹åŸå§‹éœ€æ±‚

## ğŸš¨ æ³¨æ„

1. KISS ä¸è¦éåº¦è¨­è¨ˆ
2. å…ˆåšè¨ˆåŠƒ,åœ¨æˆ‘åŒæ„å‰ä¸è¦é€²è¡Œä»»ä½•æ“ä½œ,å¦‚æœæœ‰ä¸æ˜ç™½çš„åœ°æ–¹è¦è·Ÿæˆ‘è¨è«–
3. å‹™å¿…å•Ÿå‹• Deep Think

## âš ï¸ æ³¨æ„äº‹é …

- [ ] æŠµæŠ—éåº¦è¨­è¨ˆçš„èª˜æƒ‘
- [ ] ç›¸ä¿¡æ¸¬è©¦æœƒå¼•å°æ­£ç¢ºå¯¦ä½œ
- [ ] ä¿æŒè€å¿ƒï¼Œé‡æ§‹éšæ®µå†å„ªåŒ–
- [ ] ä¸€æ¬¡åªå°ˆæ³¨ä¸€å€‹æ¸¬è©¦
- [ ] è¨˜ä½ï¼šSimple is better than complex

## ç‰ˆæœ¬æ­·å²

- [ ] v1.0.0 (2025/10/20) åˆå§‹ç‰ˆæœ¬
